# Results Directory Structure

This directory contains all experimental results organized by date and input name.

## Directory Organization

```
results/
└── YYYY-MM-DD/                          # Date of experiment run
    ├── sanity_check/                    # Results for sanity_check.json
    │   ├── request_HHMMSS.txt          # Request sent to Claude Code
    │   ├── results_HHMMSS.json         # Translation results (EN→FR→HE→EN)
    │   ├── metrics_output.csv          # Calculated metrics (distances, similarities)
    │   └── error_vs_distance.png       # Visualization graph
    │
    ├── same_sentence_progressive/       # Results for same_sentence_progressive.json
    │   ├── request_HHMMSS.txt
    │   ├── results_HHMMSS.json
    │   ├── metrics_output.csv
    │   └── error_vs_distance.png
    │
    └── different_sentences_progressive/ # Results for different_sentences_progressive.json
        ├── request_HHMMSS.txt
        ├── results_HHMMSS.json
        ├── metrics_output.csv
        └── error_vs_distance.png
```

## Example

If you run experiments on **November 23, 2025** using the **different_sentences_progressive.json** input:

```
results/2025-11-23/different_sentences_progressive/
├── request_212539.txt          # Request generated at 21:25:39
├── results_212600.json         # Results saved at 21:26:00
├── metrics_output.csv          # Metrics calculated automatically
└── error_vs_distance.png       # Graph generated automatically
```

## File Descriptions

### request_HHMMSS.txt
- Generated by: `python src/run_with_claude_code.py`
- Contains: Formatted request for Claude Code to execute translations
- Purpose: Reference for what was asked

### results_HHMMSS.json
- Generated by: Claude Code (manual execution) or `python src/run_with_agents.py` (API)
- Contains: Complete translation chain results
  ```json
  {
    "experiment_id": "...",
    "timestamp": "...",
    "mode": "claude_code_execution" or "real_claude_agents",
    "input_file": "...",
    "results": [
      {
        "id": "test_case_id",
        "original": "Original text",
        "misspelled": "Text with errors",
        "error_rate": 0.15,
        "french": "French translation",
        "hebrew": "Hebrew translation",
        "final": "Final English translation",
        "word_count": 19
      }
    ]
  }
  ```

### metrics_output.csv
- Generated by: `python src/main.py analyze results/.../*.json`
- Contains: Calculated semantic distances
  ```csv
  error_rate,cosine_distance,cosine_similarity,euclidean_distance,manhattan_distance,original,final,word_count
  0.0,0.0,1.0,0.0,0.0,Original text,Final text,19
  ```

### error_vs_distance.png
- Generated by: `python src/main.py analyze` (automatic)
- Contains: Publication-quality graph showing error rate vs semantic distance
- Format: PNG, 300 DPI, matplotlib/seaborn styling

## How to Use

### Running Experiments

**Option 1: Using run_experiment.sh (Recommended)**
```bash
# Run for specific input
./run_experiment.sh different

# Results automatically saved to:
# results/YYYY-MM-DD/different_sentences_progressive/
```

**Option 2: Manual with API**
```bash
python src/run_with_agents.py data/input/same_sentence_progressive.json

# Results saved to:
# results/YYYY-MM-DD/same_sentence_progressive/
```

**Option 3: Manual with Claude Code**
```bash
# 1. Generate request
python src/run_with_claude_code.py data/input/sanity_check.json

# 2. Copy request and send to Claude Code
# 3. Claude executes and saves results to:
#    results/YYYY-MM-DD/sanity_check/
```

### Analyzing Results

```bash
# Analyze specific experiment
python src/main.py analyze results/2025-11-23/different_sentences_progressive/results_212600.json

# This generates:
# - metrics_output.csv
# - error_vs_distance.png
# (in the same directory)
```

### Finding Results

**By Date:**
```bash
# All experiments run on a specific date
ls results/2025-11-23/
```

**By Input:**
```bash
# All runs of a specific input across all dates
find results -type d -name "same_sentence_progressive"
```

**Latest Results:**
```bash
# Most recent experiment for an input
ls -t results/*/different_sentences_progressive/results_*.json | head -1
```

## Benefits of This Structure

1. **Chronological Organization**: Easy to track when experiments were run
2. **Input Separation**: Clear separation between different input types
3. **Multiple Runs**: Can run same input multiple times on same day (different timestamps)
4. **Easy Comparison**: Compare same input across different dates
5. **Reproducibility**: Complete record of when and what was run
6. **No Conflicts**: Date + input + timestamp ensures unique paths

## Tips

### Running Multiple Times
If you run the same input multiple times on the same day, each run gets its own timestamp:
```
results/2025-11-23/same_sentence_progressive/
├── results_100000.json  # First run at 10:00:00
├── results_150000.json  # Second run at 15:00:00
└── results_200000.json  # Third run at 20:00:00
```

### Cleaning Up Old Results
```bash
# Remove all results older than 30 days
find results -type d -name "20*" -mtime +30 -exec rm -rf {} +

# Remove specific date
rm -rf results/2025-11-20
```

### Archiving Results
```bash
# Archive a specific date
tar -czf results_2025-11-23.tar.gz results/2025-11-23/

# Archive all results
tar -czf all_results.tar.gz results/
```

## Migration from Old Structure

If you have results from the old structure:
- Old: `results/claude_code_run/results_TIMESTAMP.json`
- New: `results/YYYY-MM-DD/input_name/results_TIMESTAMP.json`

You can manually move them:
```bash
# Example: Move old result to new structure
mkdir -p results/2025-11-23/same_sentence_progressive/
mv results/claude_code_run/results_20251123_212600.json \
   results/2025-11-23/same_sentence_progressive/
```

---

**Last Updated**: November 23, 2025
**Version**: 2.0 (new directory structure)
